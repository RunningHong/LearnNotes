# 1 Spring IOC和AOP理解

整体来说我会从what？why？how？即这个是什么？为什么需要用这个？怎样应用这个？这三个方面来总结我对Spring IOC 和 AOP 的理解。

## 1.1 Spring IOC理解

控制反转/依赖注入

IOC是遵循了软件设计理念的**依赖倒转原则**以及**接口隔离原则**，面向对象的设计就是为了而实现软件的更好的复用性和扩展性。

### 1.1.1 接口隔离原则（面向接口编程）

如果A要使用B的实例那么不要直接在A中对B进行初始化，而是在A中定义一个接口(Interface)，让B去实现这个接口(Interface)。

在这我们可以举一个关于电脑主机的例子：在电脑主机（A类）里有CPU、内存条（B的实例），直接实例化其实就相当于把所有的东西一体化（把所有东西都整合在一起，高耦合度，要换其中的一样东西需要把整体全部换掉），如果我们采用接口隔离原则即把各个东西分开，之后在主板（A类）上有各种各样的卡槽（A中接口Interface），内存条、CPU（B的实例）按照它们各自的卡槽标准（需要实现接口）生产，这时如果我们觉得内存不够了，就不用把这个主板全部更换掉而是直接更换内存条。

###1.1.2 依赖、倒置

**依赖**：从程序角度看比如A要调用B的方法，那么A就依赖于B；

**倒置**：在一般程序中如果**不倒置**则需要在A中主动获取B的实例：B b = new B()；这就是获取B实例的方法。**倒置**的的意思是A不再需要主动去获取B而是由其他人自动把B送上门。

在这里我们可以举一个在商店买水的例子来描述依赖倒置：

某一天我口渴了，想要喝水，这时我可以到商店去买水，告诉他们我需要一瓶水，然后他们就直接给我一瓶水（我主动的去获取水，我依赖于商店），这个本来没有太大的问题，但是如果商店离我们很远，那么我必需知道，该如何去商店，商店里是否有我需要的水等等复杂的情况。

解决这个问题最简单的方法就是让商店直接把水送给我，这样对于我来说就不用关心太多的杂事，这样一来我就只用做两件事情，**第一在商店注册**，**第二告诉商店我需要什么**（面向接口编程的体现）。

上面的做法其实就很像Spring的做法：Spring就是商店，我就是对象A，水就是B的对象，我们要怎样才能使用Spring的这个特性呢？**第一在Spring中声明一个类A**，**第二告诉Spring，A需要B**。

假设A是UserAction，B是UserService,则配置为（当然也可以用注解的方式）：

```xml
<bean id="userService" class="org.service.UserService"></bean>
<bean id="userAction" class="org.action.UserAction">
	<property name="userService" ref="userService"></property>
</bean>
```

### 1.3 依赖注入的使用

在程序运行的时候，根据情况给对应的变量设置值。

1. @Component说明哪个类需要由Spring来创建对象并管理。





## 1.2 Spring AOP理解



