# 1 单例模式

# 1.1 懒汉式（线程不安全）

```java
public class Singleton {
    private static Singleton instance;
    
    private Sinleton() {
    }
    
    public static Singleton getInstance() {
        if(instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
}
```

懒汉式单例模式是在得到实例的时候进行对象的初始化，但这个形式的单例不是线程安全的。

## 1.2 懒汉式（线程安全）

```java
public class Singleton {
    private static Singleton instance;
    
    private Singleton() {
    }
    
    public static synchronized Singleton getInstance() {
        if(instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
}
```

这个形式的单例模式使用**synchronized**关键字对getInstance()进行同步操作，所以在得到实例的时候是线程安全的。

## 1.3 饿汉式(线程安全)

```java
public class Singleton {
    private static Singleton instance = new Singleton();
    
    private Singleton() {
    }
    
    public static Singleton getInstance() {
        return instance;
    }   
}
```

饿汉式单例模式是在类加载的时候就实例化的，避免了多线程的同步，利用空间换时间，但这种方式类一加载就机型instance的初始化**，没有达到懒加载**的效果。

## 1.4 双重校验

```java
public class Singleton {
    private volatile static Singleton instance;
    
    private Singleton() {
    }
    
    public static Singleton getInstance() {
        if(instance == null) {
            synchronized(Singleton.class) {
                if(singleton == null) {
                    singleton = new Singleton();
                }
            }
        }
    }
}
```

双重检验是利用两次校验对instance进行判断instance是否被实例化，如果没有别实例化则进行同步操作，在同步操作里面再进行判断（防止第一次判断时有几个线程同时进入），如果没有实例化则进行实例化，这样的好处就是可以大大减少同步的用时，大大节省时间。

## 1.5 静态内部类方式

```java
public class Singleton {
    private satic class SingletonHolder {
        private static final Singleton INSTANCE = new Singleton();
        
        private Singleton() {
        }
        
        public static final Singleton getInstance() {
            return SingletonHolder.INSTANCE;
        }
    }
}
```

这里利用了**类记载机制**来保证初始化instance时只有一个线程，**这种方式在Singleton类被装载也不一定会被初始化**，因为：SingletonHolder类没有被制动使用，只有通过显示的调用getInstance方法时，才会显示装载SingletonHolder类，从而实例化instance（这就保证了**懒加载**）。

## 1.6 枚举方式













