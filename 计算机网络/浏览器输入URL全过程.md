[TOC]

# 浏览器输入URL全过程

## 1 DNS域名解析

当我们输入如同www.baidu.com的时候，其实这些网站的名字都是为了简化人们的记忆来命名的，计算器其实并不认识个东西，浏览器只认识IP地址，所以当输入域名地址时，浏览器首先去本地host文件，检查该文件中是否存在相应的域名、IP对应关系，如果有则向这个IP发送请求，如果没有再去DNS服务器中找IP。

## 2 建立TCP链接

通过DNS域名解析后终于拿到了服务器的IP地址，下一步就是连接服务器。对于客户端与服务器的连接，当然指的是TCP的三次握手了。

基础介绍

- **SYN（SYNchronization）**：同步序号，用来建立连接。
  SYN标志位和ACK标志位搭配使用，当SYN=1，ACK=0，表示连接请求；当SYN=1，ACK=1，表示连接被响应的时候；这个标志的数据包经常被用来进行端口扫描。
- **ACK（ACKnowledgment）**：确认号，用于确认连接是否有效。
  仅当ACK=1时确认号字段有效，当ACK=0时是无效的。TCP规定在连接建立后所有传送的报文段都必须把ACK置为1。
- **seq（Sequence Number）**：序列号。
- **FIN（finish）**：表示终结连接。
  当 FIN = 1 时，表明此报文段的发送方的数据已经发送完毕，并要求释放连接。

**三次握手过程**：

- **第一次握手**（SYN=1，ACK=0，seq=x）
  客户端发送一个TCP的SYN=1，ACK=0的数据包指明客户端打算连接服务器的端口，以及初始序号 X,保存在包头的序列号(Sequence Number)字段里。

**三次握手模拟现实场景**：

客户端：“”