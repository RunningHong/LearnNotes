[TOC]

摘自《鸟哥的Linux私房菜 - 基础学习篇》

# 正规表示法

## 1 常用符号

| 符号  | 意义                                                         |
| ----- | ------------------------------------------------------------ |
| *     | 代表 **0 个到无穷多个**任意字符                              |
| ?     | 代表**一个**任意字符                                         |
| `[]`  | 同样代表**一定有一个在括号内**的字符(非任意字符)。<br />例如 `[abcd]` 代表一定有一个字符， 可能是 a, b, c, d 这四个任何一个。<br />`[]`里不论几个字符都代表某一个字符 |
| `[-]` | 若有减号在中括号内时，代表**在编码顺序内的所有字符**。<br />例如 `[0-9]` 代表 0 到 9 之间的所有数字，因为数字的语系编码是连续的！ |
| `[^]` | 若中括号内的第一个字符为 (^) ，那表示**反向选择** （不选取）。<br />例如 `^abc` 代表只要是非 a, b, c 的其他字符就接受。 |

## 2 特殊符号

| 特殊符号   | 代表意义                                                     |
| ---------- | ------------------------------------------------------------ |
| [:alnum:]  | 代表英文大小写字符及数字，就是 0-9, A-Z, a-z                 |
| [:alpha:]  | 代表任何英文大小写字符，就是A-Z, a-z                         |
| [:blank:]  | 代表空格键与 [Tab] 按键两者                                  |
| [:cntrl:]  | 代表键盘上面的控制按键，包括 CR, LF, Tab, Del.. 等等         |
| [:digit:]  | 代表0-9的数字                                                |
| [:graph:]  | 除了空格符 (空格键和 [Tab] 按键) 外的其他所有按键            |
| [:lower:]  | 代表小写字符，就是 a-z                                       |
| [:print:]  | 代表任何可以被打印出的字符                                   |
| [:punct:]  | 代表标点符号 (punctuation symbol)，就是：" ' ? ! ; : # $...  |
| [:upper:]  | 代表大写字符，就是 A-Z                                       |
| [:space:]  | 任何会产生穸白的字符，包括空格键, [Tab], CR 等等             |
| [:xdigit:] | 代表 16 进制的数字类型，因此包括： 0-9, A-F, a-f 的数字与字符 |

## 3 示例

grep 语法：

```shell
[root@www ~]# grep [-acinv] [--color=auto] '搜寻字符串' filename
选项与参数：
-a ：将 binary 档案以 text 档案的方式搜寻数据
-c ：计算找到 '搜寻字符串' 的次数
-i ：忽略大小写的不同，所以大小写视为相同
-n ：顺便输出行号
-v ：过滤选择，亦即显示出没有 '搜寻字符串' 内容的那一行！
--color=auto ：可以将找到的关键词部分加上颜色的显示喔！

######################################################################

grep 进阶语法：
root@www ~]# grep [-A] [-B] [--color=auto] '搜寻字符串' filename
选项与参数：
-A ：后面可加数字，为 after 的意思，除了列出该行外，后续的 n 行也列出来；
-B ：后面可加数字，为 befer 的意思，除了列出该行外，前面的 n 行也列出来
```

### 3.1 搜寻特定字符

在文件中搜索含有 `the` 的所有行。

```shell
[root@www ~]# grep -n 'the' regular_express.txt
```

### 3.2 关键字过滤选择

不选择某个信息（使用 `-v` 参数）

```shell
# 在文件中选择不含 `the` 的所有行。
grep -vn 'the' regular_express.txt
```

### 3.3 搜索集合字符([])

利用中括号 `[]` 来搜寻集合字符。

```shell
# 如：想要搜索ddd 和 dad 时，中间字母为d/a，旁边都为d就行
[root@www ~]# grep -n 'd[da]d' regular_express.txt
```

说明：`[]`里不论几个字符都代表某一个字符。

### 3.4 字符过滤选择([^])

使用`[^]` 来进行字符过滤。

```shell
# 如我想选择oo字符前面一个字符不是g的（即不想要goo）。
[root@www ~]# grep -n '[^g]oo' regular_express.txt
```

### 3.5 范围性过滤([-])

使用 `[-]` 来进行范围性过滤。

```shell
# 选择oo但前面没有a-z中的任意一个字符。
[root@www ~]# grep -n '[^a-z]oo' regular_express.txt
```

### 3.6 行首过滤('^')

使用 `^` 来对行首过滤。

```shell
# 选择以the为开头的行。
[root@www ~]# grep -n '^the' regular_express.txt
```

说明： `^` 符号是在 `''` 中的，不是 `[^]` 。

### 3.7 行尾过滤('$')

使用 `$` 对行尾过滤。

```shell
# 选择行尾为.的行（使用了转义字符来修饰.）
root@www ~]# grep -n '\.$' regular_express.txt
```

### 3.8 字符占位(.)

使用 `.` 进行字符占位。

```shell
# 选择中间两个字符任意，前面为g和后面为d的行
[root@www ~]# grep -n 'g..d' regular_express.txt
```

### 3.9 重复前面字符(*)

`*` 代表 **重复0个或者多个前面的字符** 

- `o*` 代表拥有空字符串或者一个o以上的字符。（注意空容易被忽略）
- `oo*` 代表至少有一个o,即o, oo, ooo, oooo...都可能出现。
- `ooo*` 代表至少有两个o，即oo,ooo,oooo....

### 3.10  限定连续字符范围({})

`{}` 来限定字符个数，由于 `{}` 在shell中有特殊意义，所以我们需要使用转义字符 `\` 来修饰 `{}` 。

```shell
# 选取连续出现5个o的行
[root@www ~]# grep -n 'o\{5\}' regular_express.txt
```









